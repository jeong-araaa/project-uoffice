<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=yes" />
  <meta name="title" content="" />
  <meta name="author" content="" />
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <meta name="image" content="" />
  <meta property="og:type" content="website">
  <meta property="og:title" content="">
  <meta property="og:description" content="">
  <meta property="og:image" content="">
  <meta property="og:url" content="">
  <title>BO 기본 템플릿</title>
  <link rel="stylesheet" type="text/css" href="../../../../assets/css/default.min.css">
</head>

<body>
  <!-- wrap -->
  <div id="wrap">
    <!-- header -->
    <header id="header">
      <nav class="header-aside">
        <a href="../../index.html" class="txt-guide">레이아웃은 <br>"index.html" 참조</a>
      </nav>
      <div class="header-toolbar">
        <a href="../../index.html" class="txt-guide">레이아웃은 <br>"index.html" 참조</a>
      </div>
    </header>
    <!-- //header -->



    <!-- container -->
    <div id="container">
      <div class="content l-maxWidth content__list">
        <div class="table">
          <div class="table-head">
            <a href="javascript:;" class="line-btn btn-gray bd-radius-3"><i class="ico_message"></i>전체전송</a>
          </div>
          <div class="table-body">
            <table border="0" cellspacing="0" cellpadding="0">
              <colgroup>
                <col width="14%"> <!-- 이름 -->
                <col width="11%"> <!-- 수발신 -->
                <col width="*"> <!-- 내용 -->
                <col width="16%"> <!-- 날짜 -->
                <col width="14%"> <!-- 연락처 -->
              </colgroup>
              <thead>
                <tr>
                  <th>
                    <div class="th-move">
                      이름
                      <div class="modal-move">
                        <button type="button" class="btn_ico_up"></button> <button type="button"
                          class="btn_ico_down"></button>
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="th-move">
                      수발신
                      <div class="modal-move">
                        <button type="button" class="btn_ico_up"></button> <button type="button"
                          class="btn_ico_down"></button>
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="th-move">
                      내용
                      <div class="modal-move">
                        <button type="button" class="btn_ico_up"></button> <button type="button"
                          class="btn_ico_down"></button>
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="th-move">
                      날짜
                      <div class="modal-move">
                        <button type="button" class="btn_ico_up"></button> <button type="button"
                          class="btn_ico_down"></button>
                      </div>
                    </div>
                  </th>
                  <th>
                    <div class="th-move">
                      연락처
                      <div class="modal-move">
                        <button type="button" class="btn_ico_up"></button> <button type="button"
                          class="btn_ico_down"></button>
                      </div>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr class="tr-infos">
                  <td>
                    <div class="td-photoName">
                      <img src="../../../../assets/img/sub/img_user.png" alt="사진">
                      정이름
                    </div>
                  </td>
                  <td>수신 <i class="i-noti"></i></td>
                  <td>
                    <p class="text-content">내용이 들어갑니다.내용이 들</p>
                  </td>
                  <td>YYYY-MM-DD HH:MM</td>
                  <td>010-1234-1234</td>
                </tr>
                <tr>
                  <td colspan="5">
                    <div class="table-nopost">
                      등록된 정보가 없습니다.
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div><!-- //table -->

        <div class="popup-details__inner">
          <!-- 상세팝업 DM -->
          <div class="popup-details" id="popup-messages">
            <div class="card-head">
              <div class="card-title"><button type="button" class="btn-back">뒤로</button> DM</div>
            </div><!-- //card-head -->
            <ul class="tabmenu-line">
              <li data-tab="0" class="active"><a href="javascript:;">학생</a></li>
              <li data-tab="1"><a href="javascript:;">학부모</a></li>
            </ul>
            <div class="chat-wrap">
              <div class="chat-area" data-tab-panel="0">
                <div class="chat-inner">
                  <p class="chat-date"><span>11.11 수</span></p>
                  <div class="chat-box no-time chat-box-to">
                    <div class="chat-item">
                      메시지를 보냅니다.
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-to">
                    <div class="chat-item">
                      메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다.
                      메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다. 메시지를 보냅니다.
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      메시지를.
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <p class="chat-date"><span>11.12 목</span></p>
                  <div class="chat-box no-time chat-box-from">
                    <div class="chat-item">
                      메시지를.
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                  <div class="chat-box chat-box-from">
                    <div class="chat-item">
                      보내봅미다아
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                </div><!-- //chat-inner -->
                <div class="chat-form">
                  <textarea name="" id="" class="chat-textarea"></textarea>
                  <button type="button" class="chat-send">전송</button>
                </div>
              </div><!-- //chat-area -->
              <div class="chat-area" data-tab-panel="1" style="display: none;">
                <div class="chat-inner">
                  <p class="chat-date"><span>11.11 수</span></p>
                  <div class="chat-box no-time chat-box-to">
                    <div class="chat-item">
                      학부모한테 메시지를 보냅니다.
                    </div>
                    <span class="chat-time">오전 11:11</span>
                  </div><!-- //chat-box -->
                </div><!-- //chat-inner -->
                <div class="chat-form">
                  <textarea name="" id="" class="chat-textarea"></textarea>
                  <button type="button" class="chat-send">전송</button>
                </div>
              </div><!-- //chat-area -->
            </div>
          </div><!-- //popup-details -->
        </div><!-- //popup-details__inner -->

        <div class="snackbars"></div><!-- //snackbars -->
      </div><!-- //content -->
    </div>
    <!-- //container -->
  </div>
  <!-- //wrap -->
  <script type="text/javascript" src="../../../../assets/js/common.js">/* 공통(레이아웃/스낵바) */</script>
  <script type="text/javascript" src="../../../../assets/js/modal.js">/* 모달창 영역에 해당 */</script>
  <script type="text/javascript" src="../../../../assets/js/table.js">/* 테이블 영역에 해당 */</script>
  <script type="text/javascript" src="../../../../assets/js/form.js">/* 폼 영역에 해당 */</script>
  <script>
    // ==========================
    // 탭 → chat-area 토글 (동일 블록 스코프)
    // ==========================
    (function () {
      function findWrap(ul) {
        // 탭 바로 다음에 오는 .chat-wrap 우선 탐색
        let el = ul.nextElementSibling;
        while (el && !(el.classList && el.classList.contains('chat-wrap'))) {
          el = el.nextElementSibling;
        }
        // 없다면 같은 부모 안에서 첫 번째 .chat-wrap
        return el || ul.parentElement.querySelector('.chat-wrap');
      }

      function showTab(ul, li) {
        if (!ul || !li) return;

        // 탭 active 관리
        ul.querySelectorAll('li').forEach(n => n.classList.remove('active'));
        li.classList.add('active');

        // 인덱스 결정: data-tab 우선, 없으면 순서로
        const idx = li.dataset.tab ?? Array.from(ul.children).indexOf(li);

        // 같은 블록의 패널만 토글
        const wrap = findWrap(ul);
        if (!wrap) return;

        const panels = wrap.querySelectorAll('.chat-area');
        panels.forEach((p, i) => {
          const key = p.dataset.tabPanel; // 있으면 매칭, 없으면 순서로
          const on = key != null ? key === String(idx) : i === Number(idx);
          p.style.display = on ? 'block' : 'none';
          p.classList.toggle('active', !!on);
        });
      }

      // 클릭으로 전환
      document.addEventListener('click', (e) => {
        const li = e.target.closest('.tabmenu-line li');
        if (!li) return;
        const ul = li.closest('.tabmenu-line');
        showTab(ul, li);
      });

      // 초기 상태 세팅(페이지 로드 시)
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.tabmenu-line').forEach((ul) => {
          const li = ul.querySelector('li.active') || ul.querySelector('li');
          if (li) showTab(ul, li);
        });
      });
    })();
  </script>
</body>

</html>